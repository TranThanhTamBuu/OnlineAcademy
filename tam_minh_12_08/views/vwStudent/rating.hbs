{{#section 'css'}}
<style>
    .mr-20 {
        margin-right: 20px;
    }
</style>
{{/section}}

{{#section 'js'}}
<script>
    $('#save').on('click', function (e) {

        e.preventDefault();
        const swalWithBootstrapButtons = Swal.mixin({
            customClass: {
                confirmButton: 'btn btn-success',
                cancelButton: 'btn btn-danger mr-20'
            },
            buttonsStyling: false
        })

        swalWithBootstrapButtons.fire({
            title: 'Are you sure?',
            text: "You won't be able to revert this!",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonText: 'Yes',
            cancelButtonText: 'No',
            reverseButtons: true
        }).then((result) => {
            if (result.isConfirmed) {
                Swal.fire({
                    icon: 'success',
                    title: 'Rate course successfully!',
                    showConfirmButton: false,
                    timer: 1500,
                    timerProgressBar: true,
                }).then((result) => {
                    /* Read more about handling dismissals below */
                    if (result.dismiss === Swal.DismissReason.timer || result.dismiss === Swal.DismissReason.backdrop) {
                        
                        $('#frmEdit').attr('action', '/student/rating?courseid={{course.course_id}}');
                        $('#frmEdit').submit();
                    }
                })

            } else if (
                /* Read more about handling dismissals below */
                result.dismiss === Swal.DismissReason.cancel
            ) {
                Swal.fire({
                    icon: 'error',
                    title: 'Cancel!',
                    showConfirmButton: false,
                    timer: 1000,
                    timerProgressBar: true,
                })
                setTimeout(function(){location.reload();}, 1000);
                
            }
        })
    });
</script>
{{/section}}


<div class="wrapper">
    <div class="course__form" style="margin: 0px 30px 0px 30px !important; border-radius: 10px;">

        <form id="frmEdit" method="POST" action="">
            <div class="card-view_info10">
                <div class="card-header">
                    {{#if this.isStudent}}
                    <h4 id="title">Student Info</h4>
                    {{else}}
                    <h4 id="title">Teacher Info</h4>
                    {{/if}}
                </div>

                <div class="card-body">

                    <div class="ui search focus ">
                        <div class="ui left icon labeled input swdh11 swdh31">
                            <div class="ui label lb12" style="width: 115px; text-align: center;">
                                Course
                            </div>
                            <input class="prompt srch_explore" type="text" id="coursename" name="coursename"
                                readonly value="{{course.name}}">
                            
                        </div>
                    </div>

                    <div class="ui search focus mt-30">
                        <div class="ui left icon labeled input swdh11 swdh31">
                            <div class="ui label lb12" style="width: 115px; text-align: center;">
                                Rating (1-5)
                            </div>
                            <input class="prompt srch_explore" type="text" id="rating" name="rating" required
                                >
                        </div>
                    </div>

                    <div class="ui search focus mt-30">
                        <div class="ui left icon labeled input swdh11 swdh31">
                            <div class="ui label lb12" style="width: 115px; text-align: center;">
                                Comment
                            </div>
                            <input class="prompt srch_explore" type="text" id="comment" name="comment" required
                                value="This course is good!">
                        </div>
                    </div>

                </div>
                <div class="card-footer">
                    <a class="btn btn-primary mt-10"
                        style="background-color: #000 !important; border-color:#ff9800 !important; color: #ff9800 !important; margin-right: 10px;"
                        href="/student/registeredcourses" role="button">
                        <i class="fa fa-chevron-left" aria-hidden="true" style="margin-right: 5px;"></i>
                        Back to My Course
                    </a>
                    <button class="btn btn-outline-success mt-10" id="save" type="submit"
                        formaction="/student/rating?courseid={{course.course_id}}" style="margin-right: 10px;">
                        <i class="fa fa-check" aria-hidden="true" style="margin-right: 5px;"></i>
                        Save
                    </button>
                    
                </div>
            </div>
        </form>

    </div>
</div>
